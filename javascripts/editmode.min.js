!function(e){"function"==typeof define&&define.amd?define(e):e()}((function(){"use strict";var e,t,a,o;e=jQuery,t=function(t,a){a>=.5?e(t).addClass("light-background").removeClass("dark-background"):e(t).addClass("dark-background").removeClass("light-background")},a=function(t,a){var o=function(t,a){if(t&&a){"string"==typeof t&&(t=t.replace(/rgba?\(/,"").replace(/\)/,"").split(","),e.each(t,(function(e,a){t[e]=+a}))),"string"==typeof a&&(a=a.replace(/rgba?\(/,"").replace(/\)/,"").split(","),e.each(a,(function(e,t){a[e]=+t}))),"object"==typeof t&&t.hasOwnProperty("length")&&3==t.length&&t.push(1),"object"==typeof a&&a.hasOwnProperty("length")&&3==a.length&&a.push(1);var o=[0,0,0,0];return o[3]=1-(1-a[3])*(1-t[3]),0===o[3]&&(o[3]=1e-6),o[0]=Math.min(a[0]*a[3]/o[3]+t[0]*t[3]*(1-a[3])/o[3],255),o[1]=Math.min(a[1]*a[3]/o[3]+t[1]*t[3]*(1-a[3])/o[3],255),o[2]=Math.min(a[2]*a[3]/o[3]+t[2]*t[3]*(1-a[3])/o[3],255),e.map(o,(function(e){return Math.floor(e)}))}}(t||[255,255,255,1],a||[255,255,255,1]);return o},o=function(e,t){var o=a(e,t);return Math.round((.2126*+o[0]+.7152*+o[1]+.0722*+o[2])/2.55)/100},window.site=e.extend(window.site||{},{bgPickerPreview:function(a,i,r){var n=e(a).css("background-image"),s=i.imageSizes?function(e,t){for(var a,o=0,i=e.length;o<i;o++){if(e[o].width<t)return a||e[o];a=e[o]}return e[e.length-1]}(i.imageSizes,e(window).width()):null,c=i.image&&""!==i.image?"url("+s.url+")":"none",l=i.imageSizes&&""!==i.imageSizes?i.imageSizes:null,g=i.color&&""!==i.color?i.color:"rgba(0,0,0,0)";!i.colorData||""===i.colorData||i.colorData.lightness;var d,m=e("<img>"),u=e("<canvas>"),f=i.image&&""!==i.image?i.image:null;f?function(e,t){for(var a=e.length;a--;)if(t.indexOf(e[a].url.trim())>-1)return!0;return!1}(l,n)?(r.imageColor=r.imageColor?r.imageColor:defaultImageColor,r.combinedLightness=o(r.imageColor,g),t(a,r.combinedLightness)):(m.attr("src",f.replace(/.*\/(photos|voogstock)/g,"/photos")),m.on("load",(function(){ColorExtract.extract(m[0],u[0],(function(e){r.imageColor=e.bgColor?e.bgColor:"rgba(255,255,255,1)",r.combinedLightness=o(r.imageColor,g),t(a,r.combinedLightness)}))}))):(r.imageColor="rgba(255,255,255,1)",r.combinedLightness=o(r.imageColor,g),t(a,r.combinedLightness)),d=i.colorData?i.colorData.r+","+i.colorData.g+","+i.colorData.b:"255,255,255",e(":root").css(`--${i.variableName}`,g),e(":root").css(`--${i.variableName}-rgb`,d),e(a).find(".js-background-image").first().css({"background-image":c})},bgPickerCommit:function({dataBgKey:t,data:a,dataKey:o,bgPicker:i,pageType:r,blockData:n}){var s,c=e.extend(!0,{},a);return c.image=a.image||"",c.imageSizes=null==(s=a.imageSizes)||"string"==typeof s&&s.match(/^[\\'"]+$/)?"":s,c.color=a.color||"",c.combinedLightness=i.combinedLightness,["faro_common_page_blocks","faro_categories_page_sections"].includes(t)&&o&&(n[o]=n[o]||{},n[o].background=c,c=n),"articlePage"===r?Edicy.articles.currentArticle.setData(t,c):"productPage"===r?siteData.set(t,c):pageData.set(t,c),c},bgPickerColorScheme:function(t){void 0!==t&&(t>.6?e(".header-wrapper").addClass("light").removeClass("dark"):e(".header-wrapper").addClass("dark").removeClass("light"))}}),window.edy=window.edy||[],edy.push(["texteditorStyles",{name:"Button",tagname:"a",attribute:{href:"#"},classname:"custom-btn",toggle:!0}]),e(".js-data-item").each((function(){e(this).on("change",(function(e){if("checkbox"===e.target.type)var t=e.target.checked;else t=e.target.value;var a=e.target.dataset.name,o=e.target.dataset.id,i=e.target.dataset.entity,r=e.target.dataset.reload;if("site"==i)var n=new Edicy.CustomData({type:"site"});else n=new Edicy.CustomData({type:i,id:o});n.set({[a]:t},{success:function(){r&&location.reload()}})}))})),e(".form_field-cms input").length&&(e(".form_field-cms input").val().length>=1?e(".form_field-cms input").closest(".form_field-cms").addClass("with-input"):e(".form_field-cms input").closest(".form_field-cms").removeClass("with-input")),e(document).ready((function(){e(".form_field-cms input").keyup((function(t){e(this).val().length>=1?e(this).closest(".form_field-cms").addClass("with-input"):e(this).closest(".form_field-cms").removeClass("with-input")}))}))}));
