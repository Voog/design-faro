!function(t){"function"==typeof define&&define.amd?define(t):t()}((function(){"use strict";var t,o;o=function(){function t(t){this.comparator=t,this.contents=[],this.sorted=!1}return t.prototype.sort=function(){return this.contents.sort(this.comparator),this.sotred=!0},t.prototype.push=function(t){return this.contents.push(t),this.sorted=!1},t.prototype.peek=function(t){return null==t&&(t=this.contents.length-1),this.sorted||this.sort(),this.contents[t]},t.prototype.pop=function(){return this.sorted||this.sort(),this.contents.pop()},t.prototype.size=function(){return this.contents.length},t.prototype.map=function(t){return this.contents.map(t)},t}(),t=function(){var t,n,r,e,i,s;function u(){this.maxIterations=1e3,this.fractByPopulations=.75}return u.sigbits=5,u.rshift=8-u.sigbits,e=function(t,o,n){return(t<<2*u.sigbits)+(o<<u.sigbits)+n},t=function(){function t(t,o,n,r,e,i,s){this.r1=t,this.r2=o,this.g1=n,this.g2=r,this.b1=e,this.b2=i,this.histo=s}return t.prototype.volume=function(t){return this._volume&&!t||(this._volume=(this.r2-this.r1+1)*(this.g2-this.g1+1)*(this.b2-this.b1+1)),this._volume},t.prototype.count=function(t){var o,n,r,i,s,u,c,h,f,p,a;if(!this._count_set||t){for(i=0,s=u=this.r1,f=this.r2;u<=f;s=u+=1)for(n=c=this.g1,p=this.g2;c<=p;n=c+=1)for(o=h=this.b1,a=this.b2;h<=a;o=h+=1)r=e(s,n,o),i+=this.histo[r]||0;this._count_set=!0,this._count=i}return this._count},t.prototype.copy=function(){return new t(this.r1,this.r2,this.g1,this.g2,this.b1,this.b2,this.histo)},t.prototype.average=function(t){var o,n,r,i,s,c,h,f,p,a,l,g,d,b,v,m;if(!this._average||t){for(h=1<<8-u.sigbits,a=0,p=0,i=0,n=0,f=l=this.r1,b=this.r2;l<=b;f=l+=1)for(r=g=this.g1,v=this.g2;g<=v;r=g+=1)for(o=d=this.b1,m=this.b2;d<=m;o=d+=1)c=e(f,r,o),a+=s=this.histo[c]||0,p+=s*(f+.5)*h,i+=s*(r+.5)*h,n+=s*(o+.5)*h;this._average=a?[~~(p/a),~~(i/a),~~(n/a)]:[~~(h*(this.r1+this.r2+1)/2),~~(h*(this.g1+this.g2+1)/2),~~(h*(this.b1+this.b2+1)/2)]}return this._average},t.prototype.contains=function(t){var o,n,r;return r=t[0]>>u.rshift,n=t[1]>>u.rshift,o=t[2]>>u.rshift,this.r1<=r&&r<=this.r2&&this.g1<=n&&n<=this.g2&&this.b1<=o&&o<=this.b2},t}(),n=function(){function t(){this.cboxes=new o((function(t,o){var n,r;return(n=t.count()*t.volume())>(r=o.count()*o.volume())?1:n<r?-1:0}))}return t.prototype.push=function(t){return this.cboxes.push({cbox:t,color:t.average()})},t.prototype.palette=function(){return this.cboxes.map((function(t){return t.color}))},t.prototype.size=function(){return this.cboxes.size()},t.prototype.map=function(t){var o,n,r;for(o=n=0,r=this.cboxes.size();n<r;o=n+=1)return this.cboxes.peek(o).cbox.contains(t)?this.cboxes.peek(o).color:this.nearest(t)},t.prototype.cboxes=function(){return this.cboxes},t.prototype.nearest=function(t){var o,n,r,e,i,s,u;for(i=function(t){return t*t},r=1e9,n=s=0,u=this.cboxes.size();s<u;n=s+=1)(o=Math.sqrt(i(t[0]-this.cboxes.peek(n).color[0])+i(t[1]-this.cboxes.peek(n).color[1])+i(t[2]-this.cboxes.peek(n).color[2])))<r&&(r=o,e=this.cboxes.peek(n).color);return e},t}(),i=function(t){var o,n,r,i,s,c,h,f,p;for(i=1<<3*u.sigbits,r=new Array(i),f=0,p=t.length;f<p;f++)h=(c=t[f])[0]>>u.rshift,n=c[1]>>u.rshift,o=c[2]>>u.rshift,r[s=e(h,n,o)]=(r[s]||0)+1;return r},r=function(o,n){var r,e,i,s,c,h,f,p,a,l,g,d;for(l=1e6,a=0,h=1e6,c=0,i=1e6,e=0,g=0,d=o.length;g<d;g++)(p=(f=o[g])[0]>>u.rshift)<l?l=p:p>a&&(a=p),(s=f[1]>>u.rshift)<h?h=s:s>c&&(c=s),(r=f[2]>>u.rshift)<i?i=r:r>e&&(e=r);return new t(l,a,h,c,i,e,n)},s=function(t,o){var n,r,i,s,u,c,h,f,p,a,l,g,d,b,v,m,x,y,w,C,_,z,k,M,j,I,D,q,S,W;if(o.count()){if(1===o.count())return[o.copy()];if(a=o.r2-o.r1+1,u=o.g2-o.g1+1,r=o.b2-o.b1+1,h=Math.max(a,u,r),g=0,f=[],c=[],h===a)for(p=d=o.r1,z=o.r2;d<=z;p=d+=1){for(l=0,s=b=o.g1,D=o.g2;b<=D;s=b+=1)for(n=v=o.b1,q=o.b2;v<=q;n=v+=1)l+=t[e(p,s,n)]||0;g+=l,f[p]=g}else if(h===u)for(s=m=o.g1,S=o.g2;m<=S;s=m+=1){for(l=0,p=x=o.r1,W=o.r2;x<=W;p=x+=1)for(n=y=o.b1,k=o.b2;y<=k;n=y+=1)l+=t[e(p,s,n)]||0;g+=l,f[s]=g}else for(n=w=o.b1,M=o.b2;w<=M;n=w+=1){for(l=0,p=C=o.r1,j=o.r2;C<=j;p=C+=1)for(s=_=o.g1,I=o.g2;_<=I;s=_+=1)l+=t[e(p,s,n)]||0;g+=l,f[n]=g}return f.forEach((function(t,o){return c[o]=g-t})),i=function(t){var n,r,e,i,s,u,h,p,a,l,d;for(u=t+"2",h=l=o[s=t+"1"],d=o[u];l<=d;h=l+=1)if(f[h]>g/2){for(n=o.copy(),r=o.copy(),i=(p=h-o[s])<=(a=o[u]-h)?Math.min(o[u]-1,~~(h+a/2)):Math.max(o[s],~~(h-1-p/2));!f[i];)i++;for(e=c[i];!e&&f[i-1];)e=c[--i];return n[u]=i,r[s]=n[u]+1,[n,r]}},h===a?i("r"):h===u?i("g"):h===r?i("b"):void 0}},u.prototype.quantize=function(t,e){var u,c,h,f,p,a,l=this;if(!t.length||e<2||e>256)return console.log("invalid arguments"),!1;for(h=i(t),u=r(t,h),(p=new o((function(t,o){var n,r;return(n=t.count())>(r=o.count())?1:n<r?-1:0}))).push(u),(f=function(t,o){var n,r,e,i,c;for(i=1,c=0;c<l.maxIterations;)if((u=t.pop()).count()){if(n=(e=s(h,u))[0],r=e[1],!n)return void console.log("cbox1 not defined; shouldn't happen");if(t.push(n),r&&(t.push(r),i++),i>=o)return;if(c++>l.maxIterations)return void console.log("infinite loop; perhaps too few pixels")}else t.push(u),c++})(p,this.fractByPopulations*e),a=new o((function(t,o){var n,r;return(n=t.count()*t.volume())>(r=o.count()*o.volume())?1:n<r?-1:0}));p.size();)a.push(p.pop());for(f(a,e-a.size()),c=new n;a.size();)c.push(a.pop());return c},u}.call(void 0),function(){window.ColorExtract=function(){function o(){}return o.getColorMap=function(o,n,r,e,i,s){var u,c,h,f,p,a,l,g,d,b;for(null==s&&(s=8),h=o.getContext("2d").getImageData(n,r,e,i).data,f=[],a=l=r,d=r+i;l<d;a=l+=1)for(c=a*e*4,p=g=n,b=n+e;g<b;p=g+=1)u=c+4*p,f.push([h[u],h[u+1],h[u+2]]);return(new t).quantize(f,s)},o.colorDist=function(t,o){var n;return(n=function(t){return t*t})(t[0]-o[0])+n(t[1]-o[1])+n(t[2]-o[2])},o.extract=function(t,n,r){var e,i,s,u,c,h,f,p,a,l,g,d,b;for(n.width=25,n.height=25,n.getContext("2d").drawImage(t,0,0,n.width,n.height),(i=o.getColorMap(n,0,0,n.width,n.height,4).cboxes.map((function(t){return{count:t.cbox.count(),rgb:t.color}}))).sort((function(t,o){return o.count-t.count})),e=i[0].rgb,(f=o.getColorMap(n,0,0,t.width,t.height,10).cboxes.map((function(t){return{count:t.cbox.count(),rgb:t.color}}))).sort((function(t,o){return o.count-t.count})),p=0,l=0,d=f.length;l<d;l++)s=f[l],(u=o.colorDist(e,s.rgb))>p&&(p=u,c=s.rgb);for(p=0,g=0,b=f.length;g<b;g++)s=f[g],(u=o.colorDist(e,s.rgb))>p&&s.rgb!==c&&(p=u,h=s.rgb);return a=function(t){return"rgb("+t[0]+", "+t[1]+", "+t[2]+")"},r({bgColor:a(e),fgColor:a(c),fgColor2:a(h)})},o}()}.call(void 0),function(t){const o=(t,o,n)=>{let r;return function(){const e=this,i=arguments;let s=n&&!r;clearTimeout(r),r=setTimeout((function(){r=null,n||t.apply(e,i)}),o),s&&t.apply(e,i)}},n=()=>{console.log("running");var o=t(".js-menu-main"),n=o.find(".dropdown-menu, .dropdown-menu-visible"),r=n.find(".dropdown-menu-children"),e=o.find(".menu").append(r.children()),i=e.find(".menu-item-wrapper"),s=[];i.each((function(o,n){(n.offsetHeight<n.scrollHeight||n.offsetWidth<n.scrollWidth)&&(0===s.length&&s.push(i[o-1]),s.push(t(n)))})),s.length>0&&(r.append(s),n.append(r),e.append(n),n.removeClass("dropdown-menu").addClass("dropdown-menu-visible"))};window.site=t.extend(window.site||{},{bindSiteSearch:function(o,n,r){o&&new VoogSearch(o,{per_page:10,lang:n,resultsContainer:t(".js-voog-search-modal-inner").get(0),sideclick:!0,mobileModeWidth:480,updateOnKeypress:!0,noResults:r})}}),t(".container").on("mousedown",(function(o){t(o.target).closest(".js-prevent-sideclick").length||(t(".js-popover").removeClass("expanded"),t(".js-search-close-btn").trigger("click"),t(".js-image-settings-popover").toggleClass("active"))})),t(document).ready((function(){n()})),t(window).resize(o((function(){n()}),250))}(jQuery)}));
