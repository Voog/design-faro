!function(t){"function"==typeof define&&define.amd?define(t):t()}((function(){"use strict";var t,e;e=function(){function t(t){this.comparator=t,this.contents=[],this.sorted=!1}return t.prototype.sort=function(){return this.contents.sort(this.comparator),this.sotred=!0},t.prototype.push=function(t){return this.contents.push(t),this.sorted=!1},t.prototype.peek=function(t){return null==t&&(t=this.contents.length-1),this.sorted||this.sort(),this.contents[t]},t.prototype.pop=function(){return this.sorted||this.sort(),this.contents.pop()},t.prototype.size=function(){return this.contents.length},t.prototype.map=function(t){return this.contents.map(t)},t}(),t=function(){var t,n,o,r,i,s;function a(){this.maxIterations=1e3,this.fractByPopulations=.75}return a.sigbits=5,a.rshift=8-a.sigbits,r=function(t,e,n){return(t<<2*a.sigbits)+(e<<a.sigbits)+n},t=function(){function t(t,e,n,o,r,i,s){this.r1=t,this.r2=e,this.g1=n,this.g2=o,this.b1=r,this.b2=i,this.histo=s}return t.prototype.volume=function(t){return this._volume&&!t||(this._volume=(this.r2-this.r1+1)*(this.g2-this.g1+1)*(this.b2-this.b1+1)),this._volume},t.prototype.count=function(t){var e,n,o,i,s,a,c,h,u,d,p;if(!this._count_set||t){for(i=0,s=a=this.r1,u=this.r2;a<=u;s=a+=1)for(n=c=this.g1,d=this.g2;c<=d;n=c+=1)for(e=h=this.b1,p=this.b2;h<=p;e=h+=1)o=r(s,n,e),i+=this.histo[o]||0;this._count_set=!0,this._count=i}return this._count},t.prototype.copy=function(){return new t(this.r1,this.r2,this.g1,this.g2,this.b1,this.b2,this.histo)},t.prototype.average=function(t){var e,n,o,i,s,c,h,u,d,p,l,m,f,g,v,b;if(!this._average||t){for(h=1<<8-a.sigbits,p=0,d=0,i=0,n=0,u=l=this.r1,g=this.r2;l<=g;u=l+=1)for(o=m=this.g1,v=this.g2;m<=v;o=m+=1)for(e=f=this.b1,b=this.b2;f<=b;e=f+=1)c=r(u,o,e),p+=s=this.histo[c]||0,d+=s*(u+.5)*h,i+=s*(o+.5)*h,n+=s*(e+.5)*h;this._average=p?[~~(d/p),~~(i/p),~~(n/p)]:[~~(h*(this.r1+this.r2+1)/2),~~(h*(this.g1+this.g2+1)/2),~~(h*(this.b1+this.b2+1)/2)]}return this._average},t.prototype.contains=function(t){var e,n,o;return o=t[0]>>a.rshift,n=t[1]>>a.rshift,e=t[2]>>a.rshift,this.r1<=o&&o<=this.r2&&this.g1<=n&&n<=this.g2&&this.b1<=e&&e<=this.b2},t}(),n=function(){function t(){this.cboxes=new e((function(t,e){var n,o;return(n=t.count()*t.volume())>(o=e.count()*e.volume())?1:n<o?-1:0}))}return t.prototype.push=function(t){return this.cboxes.push({cbox:t,color:t.average()})},t.prototype.palette=function(){return this.cboxes.map((function(t){return t.color}))},t.prototype.size=function(){return this.cboxes.size()},t.prototype.map=function(t){var e,n,o;for(e=n=0,o=this.cboxes.size();n<o;e=n+=1)return this.cboxes.peek(e).cbox.contains(t)?this.cboxes.peek(e).color:this.nearest(t)},t.prototype.cboxes=function(){return this.cboxes},t.prototype.nearest=function(t){var e,n,o,r,i,s,a;for(i=function(t){return t*t},o=1e9,n=s=0,a=this.cboxes.size();s<a;n=s+=1)(e=Math.sqrt(i(t[0]-this.cboxes.peek(n).color[0])+i(t[1]-this.cboxes.peek(n).color[1])+i(t[2]-this.cboxes.peek(n).color[2])))<o&&(o=e,r=this.cboxes.peek(n).color);return r},t}(),i=function(t){var e,n,o,i,s,c,h,u,d;for(i=1<<3*a.sigbits,o=new Array(i),u=0,d=t.length;u<d;u++)h=(c=t[u])[0]>>a.rshift,n=c[1]>>a.rshift,e=c[2]>>a.rshift,o[s=r(h,n,e)]=(o[s]||0)+1;return o},o=function(e,n){var o,r,i,s,c,h,u,d,p,l,m,f;for(l=1e6,p=0,h=1e6,c=0,i=1e6,r=0,m=0,f=e.length;m<f;m++)(d=(u=e[m])[0]>>a.rshift)<l?l=d:d>p&&(p=d),(s=u[1]>>a.rshift)<h?h=s:s>c&&(c=s),(o=u[2]>>a.rshift)<i?i=o:o>r&&(r=o);return new t(l,p,h,c,i,r,n)},s=function(t,e){var n,o,i,s,a,c,h,u,d,p,l,m,f,g,v,b,w,C,y,x,j,k,_,z,M,T,I,O,q,P;if(e.count()){if(1===e.count())return[e.copy()];if(p=e.r2-e.r1+1,a=e.g2-e.g1+1,o=e.b2-e.b1+1,h=Math.max(p,a,o),m=0,u=[],c=[],h===p)for(d=f=e.r1,k=e.r2;f<=k;d=f+=1){for(l=0,s=g=e.g1,I=e.g2;g<=I;s=g+=1)for(n=v=e.b1,O=e.b2;v<=O;n=v+=1)l+=t[r(d,s,n)]||0;m+=l,u[d]=m}else if(h===a)for(s=b=e.g1,q=e.g2;b<=q;s=b+=1){for(l=0,d=w=e.r1,P=e.r2;w<=P;d=w+=1)for(n=C=e.b1,_=e.b2;C<=_;n=C+=1)l+=t[r(d,s,n)]||0;m+=l,u[s]=m}else for(n=y=e.b1,z=e.b2;y<=z;n=y+=1){for(l=0,d=x=e.r1,M=e.r2;x<=M;d=x+=1)for(s=j=e.g1,T=e.g2;j<=T;s=j+=1)l+=t[r(d,s,n)]||0;m+=l,u[n]=m}return u.forEach((function(t,e){return c[e]=m-t})),i=function(t){var n,o,r,i,s,a,h,d,p,l,f;for(a=t+"2",h=l=e[s=t+"1"],f=e[a];l<=f;h=l+=1)if(u[h]>m/2){for(n=e.copy(),o=e.copy(),i=(d=h-e[s])<=(p=e[a]-h)?Math.min(e[a]-1,~~(h+p/2)):Math.max(e[s],~~(h-1-d/2));!u[i];)i++;for(r=c[i];!r&&u[i-1];)r=c[--i];return n[a]=i,o[s]=n[a]+1,[n,o]}},h===p?i("r"):h===a?i("g"):h===o?i("b"):void 0}},a.prototype.quantize=function(t,r){var a,c,h,u,d,p,l=this;if(!t.length||r<2||r>256)return console.log("invalid arguments"),!1;for(h=i(t),a=o(t,h),(d=new e((function(t,e){var n,o;return(n=t.count())>(o=e.count())?1:n<o?-1:0}))).push(a),(u=function(t,e){var n,o,r,i,c;for(i=1,c=0;c<l.maxIterations;)if((a=t.pop()).count()){if(n=(r=s(h,a))[0],o=r[1],!n)return void console.log("cbox1 not defined; shouldn't happen");if(t.push(n),o&&(t.push(o),i++),i>=e)return;if(c++>l.maxIterations)return void console.log("infinite loop; perhaps too few pixels")}else t.push(a),c++})(d,this.fractByPopulations*r),p=new e((function(t,e){var n,o;return(n=t.count()*t.volume())>(o=e.count()*e.volume())?1:n<o?-1:0}));d.size();)p.push(d.pop());for(u(p,r-p.size()),c=new n;p.size();)c.push(p.pop());return c},a}.call(void 0),function(){window.ColorExtract=function(){function e(){}return e.getColorMap=function(e,n,o,r,i,s){var a,c,h,u,d,p,l,m,f,g;for(null==s&&(s=8),h=e.getContext("2d").getImageData(n,o,r,i).data,u=[],p=l=o,f=o+i;l<f;p=l+=1)for(c=p*r*4,d=m=n,g=n+r;m<g;d=m+=1)a=c+4*d,u.push([h[a],h[a+1],h[a+2]]);return(new t).quantize(u,s)},e.colorDist=function(t,e){var n;return(n=function(t){return t*t})(t[0]-e[0])+n(t[1]-e[1])+n(t[2]-e[2])},e.extract=function(t,n,o){var r,i,s,a,c,h,u,d,p,l,m,f,g;for(n.width=25,n.height=25,n.getContext("2d").drawImage(t,0,0,n.width,n.height),(i=e.getColorMap(n,0,0,n.width,n.height,4).cboxes.map((function(t){return{count:t.cbox.count(),rgb:t.color}}))).sort((function(t,e){return e.count-t.count})),r=i[0].rgb,(u=e.getColorMap(n,0,0,t.width,t.height,10).cboxes.map((function(t){return{count:t.cbox.count(),rgb:t.color}}))).sort((function(t,e){return e.count-t.count})),d=0,l=0,f=u.length;l<f;l++)s=u[l],(a=e.colorDist(r,s.rgb))>d&&(d=a,c=s.rgb);for(d=0,m=0,g=u.length;m<g;m++)s=u[m],(a=e.colorDist(r,s.rgb))>d&&s.rgb!==c&&(d=a,h=s.rgb);return p=function(t){return"rgb("+t[0]+", "+t[1]+", "+t[2]+")"},o({bgColor:p(r),fgColor:p(c),fgColor2:p(h)})},e}()}.call(void 0),function(t){const e=(t,e,n)=>{let o;return function(){const r=this,i=arguments;let s=n&&!o;clearTimeout(o),o=setTimeout((function(){o=null,n||t.apply(r,i)}),e),s&&t.apply(r,i)}},n=()=>{const t=Voog.ShoppingCart;return t?t.getContents().items.reduce(((t,e)=>t+e.quantity),0):0},o=(e,o)=>{const r=n(),i=t(".cart-btn"),s=t(".js-cart-items-count"),a=parseInt(t(".cart-btn .js-cart-items-count").text())||0,c=t(".edy-ecommerce-modal-open").length>=1;let h;if(r>=1||o){if(null!=h&&clearTimeout(h),r>a&&!c){const n=t("html").attr("lang");let o=e.detail.product_name;Object.prototype.hasOwnProperty.call(e.detail,"translations")&&Object.prototype.hasOwnProperty.call(e.detail.translations,"name")&&Object.prototype.hasOwnProperty.call(e.detail.translations.name,n)&&(o=e.detail.translations.name[n]),t(".cart-popover .product-name").text(o),t(":not(body.edy-ecommerce-modal-open) .cart-popover").addClass("visible"),h=setTimeout((function(){t(".cart-popover").removeClass("visible")}),3e3)}i.addClass("active"),s.each(((e,n)=>t(n).text(r)))}else i.removeClass("active"),s.each(((e,n)=>t(n).text("")))},r=()=>{t(document).on("voog:shoppingcart:removeproduct",(t=>{o(t,!1)})),t(document).on("voog:shoppingcart:changequantity",(t=>{o(t,!0)})),t(document).on("voog:shoppingcart:addproduct",(t=>{o(t,!0)})),t(document).on("voog:shoppingcart:contentschanged",(()=>{(()=>{const e=n(),o=t(".cart-btn"),r=t(".js-cart-items-count");e>=1?(o.addClass("active"),r.each(((n,o)=>t(o).text(e)))):(o.removeClass("active"),r.each(((e,n)=>t(n).text(""))))})()})),t(".cart-btn, .cart-popover").click((()=>{n()>=1&&Voog.ShoppingCart.showCart()}))},i=e=>{const n=t(".js-header .wrapper"),o=n.find(".header-right"),r=n.find(".js-menu-main .menu");t(window).width()>900?n.append(o):r.append(o),e()},s=()=>{t(window).width()>900?(()=>{const e=t(".js-menu-main"),n=e.find(".dropdown-menu, .dropdown-menu-visible"),o=n.find(".dropdown-menu-children"),r=e.find(".menu").append(o.children()),i=r.find(".menu-item-wrapper"),s=[];n.removeClass("dropdown-menu-visible").addClass("dropdown-menu"),i.each(((e,n)=>{const o=n.offsetTop>0;e>=1&&o&&(0===s.length&&e>=2&&s.push(t(i[e-1])),s.push(t(n)))})),s.length>0&&(o.append(s),n.append(o),r.append(n),n.removeClass("dropdown-menu").addClass("dropdown-menu-visible"))})():(()=>{const e=t(".js-menu-main .menu");e.find(".menu-item-wrapper:not(.menu-lang-wrapper)").each(((n,o)=>{e.append(t(o))}))})()},a=()=>{t(":root").css("--header-height",`${t(".js-header").height()}px`)},c=()=>{const e=t(".search");t(window).width()>900?t(".header-right").prepend(e):t(".menu").prepend(e)};window.site=t.extend(window.site||{},{bindSiteSearch:function(e,n,o){e&&(new VoogSearch(e,{per_page:10,lang:n,resultsContainer:t(".js-voog-search-modal-inner").get(0),sideclick:!1,mobileModeWidth:900,updateOnKeypress:!0,noResults:o}),t(e).on("sitesearch:showmodal",(()=>{t(window).width()<=900&&t(".js-menu-main").addClass("search-modal-active")})),t(e).on("sitesearch:hidemodal",(()=>{t(window).width()<=900&&t(".js-menu-main").removeClass("search-modal-active")})))}}),t(".container").on("mousedown",(function(e){t(e.target).closest(".js-prevent-sideclick").length||(t(".js-popover").removeClass("expanded"),t(".js-search-close-btn").trigger("click"),t(".js-image-settings-popover").toggleClass("active"))})),(()=>{let n=t(window).width();t(window).on("load",(()=>{s(),c(),i(a),t(".js-menu-main, .js-header-right").removeClass("hidden")})),t(window).resize((()=>{t(window).width()!==n&&t(".js-menu-main, .js-header-right").addClass("hidden")})),t(window).resize(e((()=>{const e=t(window).width();e!==n&&(s(),c(),i(a),t(".js-menu-main, .js-header-right").removeClass("hidden"),n=e)}),250))})(),r(),t(document).on("voog:shoppingcart:button:created",(()=>{const e=n();e>=1&&(t(".cart-btn").addClass("active"),t(".js-cart-items-count").each(((n,o)=>t(o).text(e))))})),t(".js-menu-main .mobile-menu-button").click((()=>{t(".js-header").hasClass("menu-active")?(t(".js-header").removeClass("menu-children-active menu-active"),t(".js-header .menu-item-wrapper.has-children").removeClass("active"),setTimeout((()=>{t(".js-header .menu-item-children").removeClass("active")}),1e3)):t(".js-header").addClass("menu-active")})),t(".js-menu-main .menu-children-icon, .menu-lang .menu-item, .menu-lang .menu-children-icon").click((e=>{t(e.target).closest(".menu-item-wrapper.has-children").addClass("active"),t(e.target).parents(".menu-item-wrapper.has-children").find(".menu-item-children").addClass("active"),t(".js-header").addClass("menu-children-active"),t(".js-menu-main .menu").scrollTop(0)})),t(".menu-lang .menu-children-icon").click((()=>{t(".header-right").addClass("active")})),t(".js-header .menu-children-close-icon").click((()=>{t(".menu-item-wrapper.has-children").removeClass("active"),t(".menu-item-children").removeClass("active"),t(".js-header").removeClass("menu-children-active"),setTimeout((()=>{t(".header-right").removeClass("active")}),1e3)})),t(".js-search-modal-open-btn").click((()=>{t(".js-search").addClass("active")})),t(".js-search-modal-close-btn").click((()=>{t(".js-search").removeClass("active")})),t(window).ready((()=>{window.VoogEcommerce&&!window.VoogEcommerce.storeInfo.is_publicly_unavailable&&t(".cart-btn").css("display","flex")}))}(jQuery)}));
