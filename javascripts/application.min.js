!function(t){"function"==typeof define&&define.amd?define(t):t()}((function(){"use strict";var t,e;e=function(){function t(t){this.comparator=t,this.contents=[],this.sorted=!1}return t.prototype.sort=function(){return this.contents.sort(this.comparator),this.sotred=!0},t.prototype.push=function(t){return this.contents.push(t),this.sorted=!1},t.prototype.peek=function(t){return null==t&&(t=this.contents.length-1),this.sorted||this.sort(),this.contents[t]},t.prototype.pop=function(){return this.sorted||this.sort(),this.contents.pop()},t.prototype.size=function(){return this.contents.length},t.prototype.map=function(t){return this.contents.map(t)},t}(),t=function(){var t,n,o,r,i,s;function c(){this.maxIterations=1e3,this.fractByPopulations=.75}return c.sigbits=5,c.rshift=8-c.sigbits,r=function(t,e,n){return(t<<2*c.sigbits)+(e<<c.sigbits)+n},t=function(){function t(t,e,n,o,r,i,s){this.r1=t,this.r2=e,this.g1=n,this.g2=o,this.b1=r,this.b2=i,this.histo=s}return t.prototype.volume=function(t){return this._volume&&!t||(this._volume=(this.r2-this.r1+1)*(this.g2-this.g1+1)*(this.b2-this.b1+1)),this._volume},t.prototype.count=function(t){var e,n,o,i,s,c,a,u,h,p,l;if(!this._count_set||t){for(i=0,s=c=this.r1,h=this.r2;c<=h;s=c+=1)for(n=a=this.g1,p=this.g2;a<=p;n=a+=1)for(e=u=this.b1,l=this.b2;u<=l;e=u+=1)o=r(s,n,e),i+=this.histo[o]||0;this._count_set=!0,this._count=i}return this._count},t.prototype.copy=function(){return new t(this.r1,this.r2,this.g1,this.g2,this.b1,this.b2,this.histo)},t.prototype.average=function(t){var e,n,o,i,s,a,u,h,p,l,d,m,f,g,v,b;if(!this._average||t){for(u=1<<8-c.sigbits,l=0,p=0,i=0,n=0,h=d=this.r1,g=this.r2;d<=g;h=d+=1)for(o=m=this.g1,v=this.g2;m<=v;o=m+=1)for(e=f=this.b1,b=this.b2;f<=b;e=f+=1)a=r(h,o,e),l+=s=this.histo[a]||0,p+=s*(h+.5)*u,i+=s*(o+.5)*u,n+=s*(e+.5)*u;this._average=l?[~~(p/l),~~(i/l),~~(n/l)]:[~~(u*(this.r1+this.r2+1)/2),~~(u*(this.g1+this.g2+1)/2),~~(u*(this.b1+this.b2+1)/2)]}return this._average},t.prototype.contains=function(t){var e,n,o;return o=t[0]>>c.rshift,n=t[1]>>c.rshift,e=t[2]>>c.rshift,this.r1<=o&&o<=this.r2&&this.g1<=n&&n<=this.g2&&this.b1<=e&&e<=this.b2},t}(),n=function(){function t(){this.cboxes=new e((function(t,e){var n,o;return(n=t.count()*t.volume())>(o=e.count()*e.volume())?1:n<o?-1:0}))}return t.prototype.push=function(t){return this.cboxes.push({cbox:t,color:t.average()})},t.prototype.palette=function(){return this.cboxes.map((function(t){return t.color}))},t.prototype.size=function(){return this.cboxes.size()},t.prototype.map=function(t){var e,n,o;for(e=n=0,o=this.cboxes.size();n<o;e=n+=1)return this.cboxes.peek(e).cbox.contains(t)?this.cboxes.peek(e).color:this.nearest(t)},t.prototype.cboxes=function(){return this.cboxes},t.prototype.nearest=function(t){var e,n,o,r,i,s,c;for(i=function(t){return t*t},o=1e9,n=s=0,c=this.cboxes.size();s<c;n=s+=1)(e=Math.sqrt(i(t[0]-this.cboxes.peek(n).color[0])+i(t[1]-this.cboxes.peek(n).color[1])+i(t[2]-this.cboxes.peek(n).color[2])))<o&&(o=e,r=this.cboxes.peek(n).color);return r},t}(),i=function(t){var e,n,o,i,s,a,u,h,p;for(i=1<<3*c.sigbits,o=new Array(i),h=0,p=t.length;h<p;h++)u=(a=t[h])[0]>>c.rshift,n=a[1]>>c.rshift,e=a[2]>>c.rshift,o[s=r(u,n,e)]=(o[s]||0)+1;return o},o=function(e,n){var o,r,i,s,a,u,h,p,l,d,m,f;for(d=1e6,l=0,u=1e6,a=0,i=1e6,r=0,m=0,f=e.length;m<f;m++)(p=(h=e[m])[0]>>c.rshift)<d?d=p:p>l&&(l=p),(s=h[1]>>c.rshift)<u?u=s:s>a&&(a=s),(o=h[2]>>c.rshift)<i?i=o:o>r&&(r=o);return new t(d,l,u,a,i,r,n)},s=function(t,e){var n,o,i,s,c,a,u,h,p,l,d,m,f,g,v,b,w,x,y,C,j,k,_,z,M,O,T,I,q,P;if(e.count()){if(1===e.count())return[e.copy()];if(l=e.r2-e.r1+1,c=e.g2-e.g1+1,o=e.b2-e.b1+1,u=Math.max(l,c,o),m=0,h=[],a=[],u===l)for(p=f=e.r1,k=e.r2;f<=k;p=f+=1){for(d=0,s=g=e.g1,T=e.g2;g<=T;s=g+=1)for(n=v=e.b1,I=e.b2;v<=I;n=v+=1)d+=t[r(p,s,n)]||0;m+=d,h[p]=m}else if(u===c)for(s=b=e.g1,q=e.g2;b<=q;s=b+=1){for(d=0,p=w=e.r1,P=e.r2;w<=P;p=w+=1)for(n=x=e.b1,_=e.b2;x<=_;n=x+=1)d+=t[r(p,s,n)]||0;m+=d,h[s]=m}else for(n=y=e.b1,z=e.b2;y<=z;n=y+=1){for(d=0,p=C=e.r1,M=e.r2;C<=M;p=C+=1)for(s=j=e.g1,O=e.g2;j<=O;s=j+=1)d+=t[r(p,s,n)]||0;m+=d,h[n]=m}return h.forEach((function(t,e){return a[e]=m-t})),i=function(t){var n,o,r,i,s,c,u,p,l,d,f;for(c=t+"2",u=d=e[s=t+"1"],f=e[c];d<=f;u=d+=1)if(h[u]>m/2){for(n=e.copy(),o=e.copy(),i=(p=u-e[s])<=(l=e[c]-u)?Math.min(e[c]-1,~~(u+l/2)):Math.max(e[s],~~(u-1-p/2));!h[i];)i++;for(r=a[i];!r&&h[i-1];)r=a[--i];return n[c]=i,o[s]=n[c]+1,[n,o]}},u===l?i("r"):u===c?i("g"):u===o?i("b"):void 0}},c.prototype.quantize=function(t,r){var c,a,u,h,p,l,d=this;if(!t.length||r<2||r>256)return console.log("invalid arguments"),!1;for(u=i(t),c=o(t,u),(p=new e((function(t,e){var n,o;return(n=t.count())>(o=e.count())?1:n<o?-1:0}))).push(c),(h=function(t,e){var n,o,r,i,a;for(i=1,a=0;a<d.maxIterations;)if((c=t.pop()).count()){if(n=(r=s(u,c))[0],o=r[1],!n)return void console.log("cbox1 not defined; shouldn't happen");if(t.push(n),o&&(t.push(o),i++),i>=e)return;if(a++>d.maxIterations)return void console.log("infinite loop; perhaps too few pixels")}else t.push(c),a++})(p,this.fractByPopulations*r),l=new e((function(t,e){var n,o;return(n=t.count()*t.volume())>(o=e.count()*e.volume())?1:n<o?-1:0}));p.size();)l.push(p.pop());for(h(l,r-l.size()),a=new n;l.size();)a.push(l.pop());return a},c}.call(void 0),function(){window.ColorExtract=function(){function e(){}return e.getColorMap=function(e,n,o,r,i,s){var c,a,u,h,p,l,d,m,f,g;for(null==s&&(s=8),u=e.getContext("2d").getImageData(n,o,r,i).data,h=[],l=d=o,f=o+i;d<f;l=d+=1)for(a=l*r*4,p=m=n,g=n+r;m<g;p=m+=1)c=a+4*p,h.push([u[c],u[c+1],u[c+2]]);return(new t).quantize(h,s)},e.colorDist=function(t,e){var n;return(n=function(t){return t*t})(t[0]-e[0])+n(t[1]-e[1])+n(t[2]-e[2])},e.extract=function(t,n,o){var r,i,s,c,a,u,h,p,l,d,m,f,g;for(n.width=25,n.height=25,n.getContext("2d").drawImage(t,0,0,n.width,n.height),(i=e.getColorMap(n,0,0,n.width,n.height,4).cboxes.map((function(t){return{count:t.cbox.count(),rgb:t.color}}))).sort((function(t,e){return e.count-t.count})),r=i[0].rgb,(h=e.getColorMap(n,0,0,t.width,t.height,10).cboxes.map((function(t){return{count:t.cbox.count(),rgb:t.color}}))).sort((function(t,e){return e.count-t.count})),p=0,d=0,f=h.length;d<f;d++)s=h[d],(c=e.colorDist(r,s.rgb))>p&&(p=c,a=s.rgb);for(p=0,m=0,g=h.length;m<g;m++)s=h[m],(c=e.colorDist(r,s.rgb))>p&&s.rgb!==a&&(p=c,u=s.rgb);return l=function(t){return"rgb("+t[0]+", "+t[1]+", "+t[2]+")"},o({bgColor:l(r),fgColor:l(a),fgColor2:l(u)})},e}()}.call(void 0),function(t){const e=(t,e,n)=>{let o;return function(){const r=this,i=arguments;let s=n&&!o;clearTimeout(o),o=setTimeout((function(){o=null,n||t.apply(r,i)}),e),s&&t.apply(r,i)}},n=()=>{const t=Voog.ShoppingCart;return t?t.getContents().items.reduce(((t,e)=>t+e.quantity),0):0},o=(e,o)=>{const r=n(),i=t(".cart-btn"),s=t(".cart-btn .cart-btn-count"),c=parseInt(s.text())||0,a=t(".edy-ecommerce-modal-open").length>=1;let u;if(r>=1||o){if(null!=u&&clearTimeout(u),r>c&&!a){const n=t("html").attr("lang");let o=e.detail.product_name;Object.prototype.hasOwnProperty.call(e.detail,"translations")&&Object.prototype.hasOwnProperty.call(e.detail.translations,"name")&&Object.prototype.hasOwnProperty.call(e.detail.translations.name,n)&&(o=e.detail.translations.name[n]),t(".cart-popover .product-name").text(o),t(":not(body.edy-ecommerce-modal-open) .cart-popover").addClass("visible"),u=setTimeout((function(){t(".cart-popover").removeClass("visible")}),3e3)}i.addClass("active"),s.text(r)}else i.removeClass("active"),s.text("")},r=()=>{t(document).on("voog:shoppingcart:removeproduct",(t=>{o(t,!1)})),t(document).on("voog:shoppingcart:changequantity",(t=>{o(t,!0)})),t(document).on("voog:shoppingcart:addproduct",(t=>{o(t,!0)})),t(document).on("voog:shoppingcart:contentschanged",(()=>{(()=>{const e=n(),o=t(".cart-btn"),r=t(".cart-btn .cart-btn-count");e>=1?(o.addClass("active"),r.text(e)):(o.removeClass("active"),r.text(""))})()})),t(".cart-btn, .cart-popover").click((()=>{n()>=1&&Voog.ShoppingCart.showCart()}))},i=e=>{const n=t(".js-header .header"),o=n.find(".header-right"),r=n.find(".js-menu-main .menu");t(window).width()>900?n.append(o):r.append(o),e()},s=()=>{t(window).width()>900?(()=>{const e=t(".js-menu-main"),n=e.find(".dropdown-menu, .dropdown-menu-visible"),o=n.find(".dropdown-menu-children"),r=e.find(".menu").append(o.children()),i=r.find(".menu-item-wrapper"),s=[];i.each(((e,n)=>{const o=n.offsetHeight<n.scrollHeight||n.offsetWidth<n.scrollWidth;e>=1&&o&&(0===s.length&&e>=2&&s.push(t(i[e-1])),s.push(t(n)))})),s.length>0&&(o.append(s),n.append(o),r.append(n),n.removeClass("dropdown-menu").addClass("dropdown-menu-visible"))})():(()=>{const e=t(".js-menu-main .menu");e.find(".menu-item-wrapper:not(.menu-lang-wrapper)").each(((n,o)=>{e.append(t(o))}))})()},c=()=>{if(t(window).width()>900)t(".js-menu-main .menu .menu-item-wrapper").first().css("padding-top",""),t(".js-menu-main .menu-item-children, .menu-lang .menu-item-children").css("padding-top",""),t(".search").css("padding-top","");else{const e=t(".js-header").height();t(".js-menu-main .menu div:visible").first().css("padding-top",`${e}px`),t(".js-menu-main .menu-item-children").css("padding-top",`${e}px`)}},a=()=>{const e=t(".search");t(window).width()>900?t(".header-right").prepend(e):t(".menu").prepend(e)},u=()=>{t(document).ready((()=>{s(),a(),i((()=>{c(),(()=>{const e=t(".js-header").height();t(".js-category-section").css("height",`calc(calc(100vh - ${e}px)`)})()}))})),t(window).resize(e((()=>{s(),a(),i(c)}),250))};window.site=t.extend(window.site||{},{bindSiteSearch:function(e,n,o){e&&new VoogSearch(e,{per_page:10,lang:n,resultsContainer:t(".js-voog-search-modal-inner").get(0),sideclick:!0,mobileModeWidth:480,updateOnKeypress:!0,noResults:o})}}),t(".container").on("mousedown",(function(e){t(e.target).closest(".js-prevent-sideclick").length||(t(".js-popover").removeClass("expanded"),t(".js-search-close-btn").trigger("click"),t(".js-image-settings-popover").toggleClass("active"))})),u(),r(),t(document).on("voog:shoppingcart:button:created",(()=>{n()>=1&&(t(".cart-btn").addClass("active"),t(".cart-btn .cart-btn-count").text(n()))})),t(".js-menu-main .mobile-menu-button").click((()=>{t(".js-header").hasClass("menu-active")?(t(".js-header").removeClass("menu-children-active menu-active"),t(".js-header .menu-item-wrapper.has-children").removeClass("active"),setTimeout((()=>{t(".js-header .menu-item-children").removeClass("active")}),1e3)):t(".js-header").addClass("menu-active")})),t(".js-menu-main .menu-children-icon, .menu-lang .menu-children-icon").click((e=>{t(e.target).closest(".menu-item-wrapper.has-children").addClass("active"),t(e.target.parentElement).find(".menu-item-children").addClass("active"),t(".js-header").addClass("menu-children-active"),t(".js-menu-main .menu").scrollTop(0)})),t(".menu-lang .menu-children-icon").click((()=>{t(".header-right").addClass("active")})),t(".js-header .menu-children-close-icon").click((()=>{t(".menu-item-wrapper.has-children").removeClass("active"),t(".menu-item-children").removeClass("active"),t(".js-header").removeClass("menu-children-active"),setTimeout((()=>{t(".header-right").removeClass("active")}),1e3)})),t(".js-search-modal-open-btn").click((()=>{t(".js-search").addClass("active")})),t(".js-search-modal-close-btn").click((()=>{t(".js-search").removeClass("active")}))}(jQuery)}));
